# Documentación y justificación de la configuración de cada uno de los contenedores que lo componen.

En este apartado vamos a ver la configuración de los contenedores que componen nuestro cluster.

En primer lugar vamos a hablar del contenedor de nuestro microservcio de ruby. Se ha desplegado sobre una imagen alpine con ruby isntalado, la imagen es **ruby:3.0.2-alpine3.14**. Se han instalado las gemas que contiene el fichero [dockerfile](https://github.com/CharlySM/ProyectoCC/blob/master/sinatra.Dockerfile). Este microservcio se encarga de mandar peticiones a la api de R para recibir la información solicitada, después muestra los datos obtenidos. Se ha añadido una modificación para la ejecución de la aplicación con respecto a la entrega anterior, se ha cambiado el fichero Rakefile para ejecutar la aplicación con el comando ```ruby ficheroAppSinatra```. [Fichero Rakefile.](https://github.com/CharlySM/ProyectoCC/blob/master/Rakefile)

En segundo lugar vamos a ver la configuración del contenedor de la base de datos, para ello se ha usado la imagen **mongo:3.2**. Se ha creado la imagen directamente desde el fichero docker-compose que se ha creado para desplegar las imágenes. Se ha puesto un volumen para la imagen de mongodb y se ha añadido una red para conectar la api de ruby con la base de datos mongo. También se va a añadir otra red para conectar la api de R con la base de datos.

En tercer lugar se ha creado un contenedor para la api de R, para crear este contenedor se ha usado la imagen **rstudio/plumber**. Se ha creado esta imagen con un [dockerfile](https://github.com/CharlySM/ProyectoCC/blob/master/rplumber.Dockerfile) donde se instalan también las librerías que se necesitan: tidyverse, jsonlite y mongolite. Se le ha añadido las redes basedata y apis. Esto le permitirá conectar con la base de datos de mongo y que la api de ruby pueda mandar peticiones a la api de R, para mandar la información pedida. Se ejecuta la api de R con el comando ```Rscript ficheroApiR```
